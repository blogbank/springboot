<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ë¸”ë¡œê·¸ì ê¸ˆ</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* í˜„ëŒ€ì ì¸ ê·¸ë¼ë°ì´ì…˜ ë°°ê²½ */
        body {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 50%, #f093fb 100%);
            min-height: 100vh;
        }

        /* ê¸€ë˜ìŠ¤ëª¨í”¼ì¦˜ íš¨ê³¼ */
        .glass-card {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            box-shadow: 0 25px 50px rgba(0, 0, 0, 0.1);
        }

        .glass-header {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(20px);
            border-bottom: 1px solid rgba(0, 0, 0, 0.05);
        }

        /* í˜„ëŒ€ì ì¸ ë“œë¡­ë‹¤ìš´ ë©”ë‰´ */
        .round-dropdown {
            position: relative;
            display: inline-block;
        }

        .dropdown-toggle-compact {
            display: flex;
            align-items: center;
            justify-content: space-between;
            min-width: 160px;
            max-width: 200px;
            height: 80px; /* ê²Œì‹œê¸€ ì¹´ìš´í„°ì™€ ë™ì¼í•œ ë†’ì´ */
            padding: 16px;
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 16px;
            font-weight: 600;
            font-size: 14px;
            color: #374151;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            box-shadow: 0 25px 50px rgba(0, 0, 0, 0.1);
            white-space: nowrap;
            overflow: hidden;
        }

        .dropdown-toggle-compact:hover {
            transform: translateY(-1px);
            box-shadow: 0 4px 20px rgba(102, 126, 234, 0.12);
            border-color: rgba(102, 126, 234, 0.2);
            background: rgba(255, 255, 255, 0.15);
        }

        .dropdown-toggle-compact.open {
            background: linear-gradient(145deg, #667eea, #764ba2);
            color: white;
            border-color: transparent;
        }

        .dropdown-text {
            flex: 1;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
            margin-right: 8px;
        }

        .dropdown-icon {
            margin-left: 8px;
            transition: transform 0.3s ease;
            font-size: 12px;
        }

        .dropdown-toggle-compact.open .dropdown-icon {
            transform: rotate(180deg);
        }

        .dropdown-menu {
            position: absolute;
            top: calc(100% + 8px);
            left: 0;
            right: 0;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.3);
            border-radius: 16px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.12);
            max-height: 320px;
            overflow-y: auto;
            z-index: 50;
            opacity: 0;
            visibility: hidden;
            transform: translateY(-10px) scale(0.95);
            transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .dropdown-menu.open {
            opacity: 1;
            visibility: visible;
            transform: translateY(0) scale(1);
        }

        .dropdown-item {
            display: flex;
            align-items: center;
            padding: 14px 20px;
            color: #374151;
            cursor: pointer;
            transition: all 0.2s ease;
            border-radius: 12px;
            margin: 4px 8px;
            font-weight: 500;
        }

        .dropdown-item:hover {
            background: linear-gradient(145deg, rgba(102, 126, 234, 0.1), rgba(118, 75, 162, 0.1));
            color: #667eea;
            transform: translateX(4px);
        }

        .dropdown-item.selected {
            background: linear-gradient(145deg, #667eea, #764ba2);
            color: white;
            font-weight: 600;
        }

        .dropdown-item.selected:hover {
            transform: none;
            background: linear-gradient(145deg, #5a67d8, #6b46c1);
        }

        .dropdown-item-icon {
            margin-right: 10px;
            font-size: 16px;
        }

        /* í˜„ëŒ€ì ì¸ ë“œë¡­ë‹¤ìš´ ì»¨í…Œì´ë„ˆ */
        .modern-round-container {
            display: flex;
            align-items: center;
            padding: 24px;
            background: rgba(255, 255, 255, 0.8);
            backdrop-filter: blur(15px);
            border-radius: 24px;
            border: 1px solid rgba(255, 255, 255, 0.4);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.06);
            margin-bottom: 8px;
        }

        .dropdown-label {
            margin-right: 16px;
            font-weight: 600;
            color: #6b7280;
            font-size: 14px;
        }

        /* í—¤ë” ì¹´ë“œ (ê²Œì‹œê¸€ ì¹´ìš´í„°) - ë“œë¡­ë‹¤ìš´ê³¼ ì™„ì „íˆ ë™ì¼í•œ í¬ê¸° */
        .header-card {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-width: 160px;
            max-width: 200px;
            height: 80px; /* ë“œë¡­ë‹¤ìš´ê³¼ ë™ì¼í•œ ë†’ì´ */
            padding: 16px;
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 16px;
            box-shadow: 0 25px 50px rgba(0, 0, 0, 0.1);
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .header-card:hover {
            transform: translateY(-1px);
            box-shadow: 0 4px 20px rgba(102, 126, 234, 0.12);
            border-color: rgba(102, 126, 234, 0.2);
            background: rgba(255, 255, 255, 0.15);
        }

        /* ëª¨ë°”ì¼ ë°˜ì‘í˜• ë””ìì¸ */
        @media (max-width: 768px) {
            .glass-header .max-w-4xl {
                padding-bottom: 16px;
            }

            .glass-header .flex.items-center.justify-between {
                flex-direction: column;
                align-items: flex-start;
                gap: 16px;
            }

            .glass-header .flex.items-center.gap-4 {
                flex-direction: column;
                width: 100%;
                gap: 12px;
            }

            .header-card {
                width: 100%;
                text-align: center;
                height: 60px;
            }

            .dropdown-toggle-compact {
                width: 100%;
                min-width: unset;
                max-width: unset;
                height: 60px;
                font-size: 16px;
            }

            .dropdown-text {
                font-size: 16px;
            }

            .dropdown-icon {
                font-size: 14px;
            }

            .dropdown-menu {
                font-size: 16px;
            }
        }

        @media (max-width: 480px) {
            .glass-header .max-w-4xl {
                padding-left: 16px;
                padding-right: 16px;
            }

            h1 {
                font-size: 1.75rem !important;
            }

            .dropdown-toggle-compact {
                height: 56px;
                padding: 12px;
                font-size: 15px;
            }

            .dropdown-text {
                font-size: 15px;
            }
        }

        /* í˜„ëŒ€ì ì¸ ì¹´ë“œ ë””ìì¸ */
        .modern-card {
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.3);
            border-radius: 24px;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            overflow: hidden;
            position: relative;
        }

        .modern-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, #667eea, #764ba2, #f093fb);
            opacity: 0;
            transition: opacity 0.3s;
        }

        .modern-card:hover {
            transform: translateY(-8px) scale(1.02);
            box-shadow: 0 32px 64px rgba(0, 0, 0, 0.1);
            border-color: rgba(102, 126, 234, 0.3);
        }

        .modern-card:hover::before {
            opacity: 1;
        }

        .modern-card:hover .card-title {
            background: linear-gradient(135deg, #667eea, #764ba2);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .modern-card:hover .card-icon {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            transform: scale(1.1) rotate(5deg);
        }

        .card-icon {
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        /* í˜„ëŒ€ì ì¸ ì•„ë°”íƒ€ */
        .avatar-gradient {
            background: linear-gradient(135deg, #667eea, #764ba2, #f093fb);
            animation: rotate 6s linear infinite;
        }

        @keyframes rotate {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }

        /* ë¡œë”© ì• ë‹ˆë©”ì´ì…˜ */
        .pulse {
            animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }

        /* ìŠ¤ì¼ˆë ˆí†¤ ë¡œë”© */
        .skeleton {
            background: linear-gradient(90deg, rgba(255,255,255,0.1) 25%, rgba(255,255,255,0.3) 50%, rgba(255,255,255,0.1) 75%);
            background-size: 200% 100%;
            animation: shimmer 1.5s infinite;
        }

        @keyframes shimmer {
            0% { background-position: -200% 0; }
            100% { background-position: 200% 0; }
        }

        .line-clamp-2 {
            overflow: hidden;
            display: -webkit-box;
            -webkit-box-orient: vertical;
            -webkit-line-clamp: 2;
        }

        .modal {
            display: none;
        }

        .modal.active {
            display: flex;
            align-items: center;
            justify-content: center;
        }

        /* ë¶€ë“œëŸ¬ìš´ ìŠ¤í¬ë¡¤ */
        * {
            scroll-behavior: smooth;
        }

        /* í˜„ëŒ€ì ì¸ ìŠ¤í¬ë¡¤ë°” */
        ::-webkit-scrollbar {
            width: 8px;
        }

        ::-webkit-scrollbar-track {
            background: rgba(255, 255, 255, 0.1);
        }

        ::-webkit-scrollbar-thumb {
            background: rgba(102, 126, 234, 0.6);
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: rgba(102, 126, 234, 0.8);
        }
    </style>
</head>
<body>
    <!-- ì´ˆê¸° ì „ì²´ í˜ì´ì§€ ë¡œë”© (ì²« ë¡œë“œì‹œë§Œ) -->
    <div id="loading" class="min-h-screen flex items-center justify-center">
        <div class="glass-card rounded-3xl p-8 text-center">
            <div class="w-12 h-12 mx-auto mb-4 pulse">
                <div class="w-full h-full bg-gradient-to-r from-purple-400 to-pink-400 rounded-full flex items-center justify-center">
                    <span class="text-white text-xl font-bold">âœ¨</span>
                </div>
            </div>
            <p class="text-white font-medium">ë¸”ë¡œê·¸ ê²Œì‹œê¸€ì„ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...</p>
        </div>
    </div>

    <!-- ì—ëŸ¬ í™”ë©´ -->
    <div id="error" class="min-h-screen flex items-center justify-center" style="display: none;">
        <div class="glass-card rounded-3xl p-8 text-center max-w-md">
            <div class="w-16 h-16 bg-red-500 bg-opacity-20 rounded-full flex items-center justify-center mx-auto mb-4">
                <span class="text-red-300 text-2xl">âš ï¸</span>
            </div>
            <h2 class="text-xl font-bold text-white mb-2">ë¬¸ì œê°€ ë°œìƒí–ˆì–´ìš”</h2>
            <p id="error-message" class="text-gray-300 mb-6"></p>
            <button onclick="retryCurrentRound()" class="round-btn px-6 py-3 rounded-2xl font-medium">
                ë‹¤ì‹œ ì‹œë„í•˜ê¸°
            </button>
        </div>
    </div>

    <!-- ë©”ì¸ ì½˜í…ì¸  -->
    <div id="main-content" style="display: none;">
        <!-- í˜„ëŒ€ì ì¸ ê¸€ë˜ìŠ¤ í—¤ë” -->
        <div class="glass-header sticky top-0 z-30">
            <div class="max-w-4xl mx-auto px-4 py-6">
                <div class="flex items-center justify-between mb-6">
                    <div>
                        <h1 class="text-3xl font-bold bg-gradient-to-r from-purple-600 to-pink-600 bg-clip-text text-transparent">
                            âœ¨ ë¸”ë¡œê·¸ì ê¸ˆ
                        </h1>
                        <p id="total-count" class="text-gray-600 mt-1 font-medium">ì´ 0ëª…ì˜ ê°œë°œì</p>
                    </div>
                    <div class="flex items-center gap-4">
                        <div class="header-card text-center">
                            <div class="text-sm text-gray-600 font-medium">ê²Œì‹œê¸€</div>
                            <div id="posts-count" class="text-2xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent">0ê°œ</div>
                        </div>
                        <!-- ì»´íŒ©íŠ¸í•œ ë¼ìš´ë“œ ì„ íƒ ë“œë¡­ë‹¤ìš´ -->
                        <div class="round-dropdown">
                            <div id="dropdown-toggle" class="dropdown-toggle-compact">
                                <span id="selected-round-text" class="dropdown-text">1ï¸âƒ£ Round 1</span>
                                <span class="dropdown-icon">â–¼</span>
                            </div>
                            <div id="dropdown-menu" class="dropdown-menu">
                                <!-- ë™ì ìœ¼ë¡œ ìƒì„±ë˜ëŠ” ë“œë¡­ë‹¤ìš´ ì˜µì…˜ë“¤ -->
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="max-w-4xl mx-auto px-4 py-8">
            <div id="posts-section">
                <h2 class="text-lg font-semibold text-gray-800 mb-6 flex items-center">
                    <span class="mr-2 text-blue-600">ğŸ“</span>
                    ìµœê·¼ ê²Œì‹œê¸€
                </h2>
                <!-- ê²Œì‹œê¸€ ì˜ì—­ ë¡œë”© ìŠ¤í”¼ë„ˆ -->
                <div id="posts-loading" class="hidden flex items-center justify-center py-20">
                    <div class="glass-card rounded-3xl p-8 text-center">
                        <div class="w-16 h-16 mx-auto mb-4">
                            <div class="w-full h-full border-4 border-gray-200 border-t-purple-600 rounded-full animate-spin"></div>
                        </div>
                        <p class="text-gray-600 font-medium">ê²Œì‹œê¸€ì„ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...</p>
                    </div>
                </div>

                <div id="posts-container" class="grid gap-4">
                </div>
            </div>

            <div id="authors-section" style="display: none;">
                <h2 class="text-lg font-semibold text-gray-800 mb-6 flex items-center mt-12">
                    <span class="mr-2 text-gray-400">ğŸ‘¥</span>
                    ì¤€ë¹„ì¤‘
                </h2>
                <div id="authors-container" class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3">
                </div>
            </div>
        </div>
    </div>

    <div id="webview-modal" class="modal fixed inset-0 bg-black bg-opacity-50 z-50 p-2 sm:p-4 md:p-6 lg:p-8">
        <div id="modal-container" class="bg-white rounded-2xl sm:rounded-3xl w-full h-full sm:h-[85vh] md:h-[80vh] lg:h-[75vh] xl:max-w-7xl lg:max-w-6xl md:max-w-4xl sm:max-w-2xl overflow-hidden shadow-2xl relative" style="min-width: 320px; min-height: 240px; max-width: 95vw; max-height: 95vh;">
            <div class="bg-white border-b border-gray-200 px-6 py-4 flex items-center justify-between">
                <div class="flex items-center">
                    <div id="modal-avatar" class="w-8 h-8 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full flex items-center justify-center text-white text-sm font-medium"></div>
                    <div class="ml-3">
                        <h3 id="modal-author" class="font-semibold text-gray-900"></h3>
                        <p id="modal-title" class="text-sm text-gray-500 truncate max-w-md"></p>
                    </div>
                </div>
                <button onclick="closeModal()" class="w-10 h-10 bg-gray-100 hover:bg-gray-200 rounded-full flex items-center justify-center transition-colors text-gray-600">
                    âœ•
                </button>
            </div>
            <div class="h-full pb-16 sm:pb-20">
                <iframe id="modal-iframe" class="w-full h-full border-0" sandbox="allow-same-origin allow-scripts allow-forms allow-popups"></iframe>
            </div>

            <div class="resize-handle resize-top" style="position: absolute; top: 0; left: 0; width: 100%; height: 8px; cursor: ns-resize; background: transparent;"></div>
            <div class="resize-handle resize-right" style="position: absolute; top: 0; right: 0; width: 8px; height: 100%; cursor: ew-resize; background: transparent;"></div>
            <div class="resize-handle resize-bottom" style="position: absolute; bottom: 0; left: 0; width: 100%; height: 8px; cursor: ns-resize; background: transparent;"></div>
            <div class="resize-handle resize-left" style="position: absolute; top: 0; left: 0; width: 8px; height: 100%; cursor: ew-resize; background: transparent;"></div>

            <div class="resize-handle resize-corner-tl" style="position: absolute; top: 0; left: 0; width: 16px; height: 16px; cursor: nw-resize; background: linear-gradient(45deg, #9CA3AF 0%, #9CA3AF 20%, transparent 20%);"></div>
            <div class="resize-handle resize-corner-tr" style="position: absolute; top: 0; right: 0; width: 16px; height: 16px; cursor: ne-resize; background: linear-gradient(135deg, #9CA3AF 0%, #9CA3AF 20%, transparent 20%);"></div>
            <div class="resize-handle resize-corner-bl" style="position: absolute; bottom: 0; left: 0; width: 16px; height: 16px; cursor: sw-resize; background: linear-gradient(-45deg, #9CA3AF 0%, #9CA3AF 20%, transparent 20%);"></div>
            <div class="resize-handle resize-corner-br" style="position: absolute; bottom: 0; right: 0; width: 16px; height: 16px; cursor: nw-resize; background: linear-gradient(135deg, transparent 0%, transparent 40%, #9CA3AF 40%, #9CA3AF 60%, transparent 60%);"></div>
        </div>
    </div>

    <script>
        // ë¼ìš´ë“œ ì„¤ì • (ì—¬ê¸°ì„œ ìµœëŒ€ ë¼ìš´ë“œ ìˆ˜ë¥¼ ì¡°ì •í•  ìˆ˜ ìˆìŒ)
        const ROUND_CONFIG = {
            maxRounds: 10, // ìµœëŒ€ ë¼ìš´ë“œ ìˆ˜ (í™•ì¥ ì‹œ ì´ ê°’ë§Œ ë³€ê²½í•˜ë©´ ë¨)
            allButtonLabel: 'ì „ì²´', // ì „ì²´ ë²„íŠ¼ í…ìŠ¤íŠ¸
            roundPrefix: 'Round' // ë¼ìš´ë“œ ë²„íŠ¼ í…ìŠ¤íŠ¸ ì ‘ë‘ì‚¬
        };

        let blogData = null;
        let currentRound = null; // í˜„ì¬ ì„ íƒëœ ë¼ìš´ë“œë¥¼ ì¶”ì 
        let isInitialLoad = true; // ì²« ë¡œë“œì¸ì§€ í™•ì¸í•˜ëŠ” í”Œë˜ê·¸

        document.addEventListener('DOMContentLoaded', function() {
            initializeDropdown(); // ë“œë¡­ë‹¤ìš´ ë©”ë‰´ ì´ˆê¸°í™”
            setupDropdownEvents(); // ë“œë¡­ë‹¤ìš´ ì´ë²¤íŠ¸ ì„¤ì •
            loadData();
        });

        // Round 1 ë¸”ë¡œê·¸ í¬ìŠ¤íŠ¸ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ê¸°ë³¸ í•¨ìˆ˜
        function loadData() {
            loadDataByRound(1);
        }

        // íŠ¹ì • ë¼ìš´ë“œ ë˜ëŠ” ì „ì²´ ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” í•¨ìˆ˜
        function loadDataByRound(roundNumber) {
            currentRound = roundNumber;

            // ì²« ë¡œë“œ ì‹œ ë©”ì¸ ì½˜í…ì¸ ë¥¼ ë¨¼ì € í‘œì‹œí•˜ê³  ê²Œì‹œê¸€ ì˜ì—­ë§Œ ë¡œë”©
            if (isInitialLoad) {
                // ì²« ë¡œë“œ: ë©”ì¸ ì½˜í…ì¸ ë¥¼ ë¨¼ì € ë³´ì´ê²Œ í•˜ê³  ê²Œì‹œê¸€ ì˜ì—­ë§Œ ë¡œë”©
                document.getElementById('loading').style.display = 'none';
                document.getElementById('main-content').style.display = 'block';
                showLocalLoading();
            } else {
                // ë¼ìš´ë“œ ì „í™˜: ê²Œì‹œê¸€ ì˜ì—­ë§Œ ë¡œë”©
                showLocalLoading();
            }

            // ë“œë¡­ë‹¤ìš´ ìƒíƒœ ì—…ë°ì´íŠ¸
            updateDropdownSelection(roundNumber);

            let apiUrl;
            let fetchOptions = {
                headers: {
                    'Content-Type': 'application/json',
                }
            };

            if (roundNumber === null) {
                // ì „ì²´ ë°ì´í„° ì¡°íšŒ
                apiUrl = '/api/blog-posts';
                fetchOptions.method = 'GET';
            } else {
                // íŠ¹ì • ë¼ìš´ë“œ ë°ì´í„° ì¡°íšŒ
                apiUrl = '/api/blog-posts/rounds/' + roundNumber;
                fetchOptions.method = 'POST';
            }

            fetch(apiUrl, fetchOptions)
                .then(function(response) {
                    if (!response.ok) {
                        throw new Error('HTTP error! status: ' + response.status);
                    }
                    return response.json();
                })
                .then(function(data) {
                    blogData = data;
                    renderPage(roundNumber);
                })
                .catch(function(error) {
                    showError(error.message || 'ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');
                });
        }

        // ë“œë¡­ë‹¤ìš´ ë©”ë‰´ ì´ˆê¸°í™” í•¨ìˆ˜
        function initializeDropdown() {
            const menuContainer = document.getElementById('dropdown-menu');
            menuContainer.innerHTML = ''; // ê¸°ì¡´ ë‚´ìš© ì´ˆê¸°í™”

            // ë¼ìš´ë“œ ì˜µì…˜ë“¤ ìƒì„± (Round 1ì´ ê¸°ë³¸ ì„ íƒ)
            for (let i = 1; i <= ROUND_CONFIG.maxRounds; i++) {
                const roundOption = createDropdownItem(
                    `${i}ï¸âƒ£`,
                    `${ROUND_CONFIG.roundPrefix} ${i}`,
                    i,
                    i === 1 // Round 1ì„ ê¸°ë³¸ ì„ íƒìœ¼ë¡œ ì„¤ì •
                );
                menuContainer.appendChild(roundOption);
            }
        }

        // ê°œë³„ ë“œë¡­ë‹¤ìš´ ì˜µì…˜ì„ ìƒì„±í•˜ëŠ” í•¨ìˆ˜
        function createDropdownItem(icon, label, roundNumber, isSelected) {
            const item = document.createElement('div');
            item.className = isSelected ? 'dropdown-item selected' : 'dropdown-item';
            item.setAttribute('data-round', roundNumber);

            item.innerHTML =
                '<span class="dropdown-item-icon">' + icon + '</span>' +
                '<span>' + label + '</span>';

            item.onclick = function() {
                loadDataByRound(roundNumber);
                closeDropdown();
            };

            return item;
        }

        // ë“œë¡­ë‹¤ìš´ ì„ íƒ ìƒíƒœ ì—…ë°ì´íŠ¸ í•¨ìˆ˜
        function updateDropdownSelection(selectedRound) {
            // ë“œë¡­ë‹¤ìš´ í† ê¸€ ë²„íŠ¼ í…ìŠ¤íŠ¸ ì—…ë°ì´íŠ¸
            const selectedText = document.getElementById('selected-round-text');
            let displayText, icon;

            if (selectedRound === null) {
                icon = 'ğŸ“‹';
                displayText = ROUND_CONFIG.allButtonLabel;
            } else {
                icon = `${selectedRound}ï¸âƒ£`;
                displayText = `${ROUND_CONFIG.roundPrefix} ${selectedRound}`;
            }

            selectedText.innerHTML = `${icon} ${displayText}`;

            // ë“œë¡­ë‹¤ìš´ ë©”ë‰´ì˜ ëª¨ë“  í•­ëª©ì—ì„œ selected í´ë˜ìŠ¤ ì œê±°
            const allItems = document.querySelectorAll('.dropdown-item');
            allItems.forEach(item => {
                item.classList.remove('selected');
            });

            // ì„ íƒëœ í•­ëª©ì— selected í´ë˜ìŠ¤ ì¶”ê°€
            const selectedItem = document.querySelector(`.dropdown-item[data-round="${selectedRound}"]`);
            if (selectedItem) {
                selectedItem.classList.add('selected');
            }
        }

        // ë“œë¡­ë‹¤ìš´ ì´ë²¤íŠ¸ ì„¤ì • í•¨ìˆ˜
        function setupDropdownEvents() {
            const dropdownToggle = document.getElementById('dropdown-toggle');
            const dropdownMenu = document.getElementById('dropdown-menu');

            // ë“œë¡­ë‹¤ìš´ í† ê¸€ í´ë¦­ ì´ë²¤íŠ¸
            dropdownToggle.addEventListener('click', function() {
                toggleDropdown();
            });

            // ì™¸ë¶€ í´ë¦­ì‹œ ë“œë¡­ë‹¤ìš´ ë‹«ê¸°
            document.addEventListener('click', function(event) {
                if (!event.target.closest('.round-dropdown')) {
                    closeDropdown();
                }
            });

            // ESC í‚¤ë¡œ ë“œë¡­ë‹¤ìš´ ë‹«ê¸°
            document.addEventListener('keydown', function(event) {
                if (event.key === 'Escape') {
                    closeDropdown();
                }
            });
        }

        // ë“œë¡­ë‹¤ìš´ í† ê¸€ í•¨ìˆ˜
        function toggleDropdown() {
            const dropdownToggle = document.getElementById('dropdown-toggle');
            const dropdownMenu = document.getElementById('dropdown-menu');

            if (dropdownMenu.classList.contains('open')) {
                closeDropdown();
            } else {
                openDropdown();
            }
        }

        // ë“œë¡­ë‹¤ìš´ ì—´ê¸° í•¨ìˆ˜
        function openDropdown() {
            const dropdownToggle = document.getElementById('dropdown-toggle');
            const dropdownMenu = document.getElementById('dropdown-menu');

            dropdownToggle.classList.add('open');
            dropdownMenu.classList.add('open');
        }

        // ë“œë¡­ë‹¤ìš´ ë‹«ê¸° í•¨ìˆ˜
        function closeDropdown() {
            const dropdownToggle = document.getElementById('dropdown-toggle');
            const dropdownMenu = document.getElementById('dropdown-menu');

            dropdownToggle.classList.remove('open');
            dropdownMenu.classList.remove('open');
        }

        // ì „ì²´ í˜ì´ì§€ ë¡œë”© (ì²« ë¡œë“œì‹œë§Œ ì‚¬ìš©)
        function showLoading() {
            document.getElementById('loading').style.display = 'flex';
            document.getElementById('error').style.display = 'none';
            document.getElementById('main-content').style.display = 'none';
        }

        // ëª©ë¡ ì˜ì—­ ë¡œë”© (ë¼ìš´ë“œ ì „í™˜ì‹œ ì‚¬ìš©)
        function showLocalLoading() {
            document.getElementById('posts-loading').classList.remove('hidden');
            document.getElementById('posts-container').classList.add('hidden');
        }

        // ëª©ë¡ ì˜ì—­ ë¡œë”© ìˆ¨ê¹€
        function hideLocalLoading() {
            document.getElementById('posts-loading').classList.add('hidden');
            document.getElementById('posts-container').classList.remove('hidden');
        }

        function showError(message) {
            document.getElementById('loading').style.display = 'none';
            document.getElementById('error').style.display = 'flex';
            document.getElementById('main-content').style.display = 'none';
            document.getElementById('error-message').textContent = message;
            hideLocalLoading();
        }

        // í˜„ì¬ ì„ íƒëœ ë¼ìš´ë“œë¥¼ ë‹¤ì‹œ ë¡œë“œí•˜ëŠ” í•¨ìˆ˜
        function retryCurrentRound() {
            loadDataByRound(currentRound);
        }

        function renderPage(selectedRound) {
            if (!blogData) return;

            var postsWithContent = blogData.posts.filter(function(post) {
                return post.title && post.link;
            });

            var postsWithoutContent = blogData.posts.filter(function(post) {
                return !post.title || !post.link;
            });

            // ë¼ìš´ë“œë³„ íƒ€ì´í‹€ í‘œì‹œ ê°œì„ 
            var titleText = selectedRound === null ? 'ìµœê·¼ ê²Œì‹œê¸€' : 'Round ' + selectedRound + ' ê²Œì‹œê¸€';
            document.getElementById('posts-section').querySelector('h2').innerHTML =
                '<span class="mr-2 text-blue-600">ğŸ“</span>' + titleText;

            document.getElementById('total-count').textContent = 'ì´ ' + blogData.totalCount + 'ëª…ì˜ ê°œë°œì';
            document.getElementById('posts-count').textContent = postsWithContent.length + 'ê°œ';

            renderPosts(postsWithContent);

            // authors-sectionì€ ì¼ë‹¨ ìˆ¨ê¹€ ì²˜ë¦¬ (ë¼ìš´ë“œë³„ë¡œëŠ” í‘œì‹œí•˜ì§€ ì•ŠìŒ)
            document.getElementById('authors-section').style.display = 'none';

            // ê²Œì‹œê¸€ ë¡œë”© ì™„ë£Œ ì²˜ë¦¬
            hideLocalLoading();

            // ì²« ë¡œë“œ ì™„ë£Œ í‘œì‹œ
            if (isInitialLoad) {
                isInitialLoad = false;
            }
        }

        function renderPosts(posts) {
            var container = document.getElementById('posts-container');
            container.innerHTML = '';

            posts.forEach(function(post) {
                var postCard = createPostCard(post);
                container.appendChild(postCard);
            });
        }

        function renderAuthors(authors) {
            var container = document.getElementById('authors-container');
            container.innerHTML = '';

            authors.forEach(function(author) {
                var authorCard = createAuthorCard(author);
                container.appendChild(authorCard);
            });
        }

        function createPostCard(post) {
            var div = document.createElement('div');
            div.className = 'bg-white rounded-2xl p-6 shadow-sm border border-gray-100 transition-all duration-300 cursor-pointer hover:shadow-md';
            div.onclick = function() { openModal(post); };

            div.innerHTML =
                '<div class="flex items-start justify-between">' +
                    '<div class="flex-1">' +
                        '<div class="flex items-center mb-3">' +
                            '<div class="w-8 h-8 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full flex items-center justify-center text-white text-sm font-medium">' +
                                post.authorName.charAt(0) +
                            '</div>' +
                            '<div class="ml-3">' +
                                '<p class="font-medium text-gray-900">' + post.authorName + '</p>' +
                                '<p class="text-sm text-gray-500">#' + post.sequenceNumber + '</p>' +
                            '</div>' +
                        '</div>' +
                        '<h3 class="text-lg font-semibold text-gray-900 mb-2 line-clamp-2">' +
                            post.title +
                        '</h3>' +
                        (post.memo ? '<p class="text-sm text-gray-600 mb-3">' + post.memo + '</p>' : '') +
                        '<div class="flex items-center text-sm text-blue-600">' +
                            '<span class="mr-1">ğŸ”—</span>' +
                            '<span>ê¸€ ì½ê¸°</span>' +
                        '</div>' +
                    '</div>' +
                    '<div class="ml-4">' +
                        '<div class="w-12 h-12 bg-gray-100 rounded-xl flex items-center justify-center text-xl">' +
                            'ğŸ“„' +
                        '</div>' +
                    '</div>' +
                '</div>';

            return div;
        }

        function createAuthorCard(author) {
            var div = document.createElement('div');
            div.className = 'bg-white rounded-xl p-4 shadow-sm border border-gray-100';

            div.innerHTML =
                '<div class="flex items-center">' +
                    '<div class="w-8 h-8 bg-gray-200 rounded-full flex items-center justify-center text-gray-600 text-sm font-medium">' +
                        author.authorName.charAt(0) +
                    '</div>' +
                    '<div class="ml-3 flex-1">' +
                        '<p class="font-medium text-gray-700 text-sm">' + author.authorName + '</p>' +
                        '<p class="text-xs text-gray-400">#' + author.sequenceNumber + '</p>' +
                    '</div>' +
                '</div>';

            return div;
        }

        let isResizing = false;
        let resizeType = '';
        let startX, startY, startWidth, startHeight, startLeft, startTop;

        function openModal(post) {
            if (!post.link || !post.title) return;

            document.getElementById('modal-avatar').textContent = post.authorName.charAt(0);
            document.getElementById('modal-author').textContent = post.authorName;
            document.getElementById('modal-title').textContent = post.title;
            document.getElementById('modal-iframe').src = post.link;
            document.getElementById('webview-modal').classList.add('active');

            setupResizeHandles();
        }

        function closeModal() {
            document.getElementById('webview-modal').classList.remove('active');
            document.getElementById('modal-iframe').src = '';
        }

        function setupResizeHandles() {
            var modal = document.getElementById('modal-container');

            var topHandle = modal.querySelector('.resize-top');
            var rightHandle = modal.querySelector('.resize-right');
            var bottomHandle = modal.querySelector('.resize-bottom');
            var leftHandle = modal.querySelector('.resize-left');

            var tlHandle = modal.querySelector('.resize-corner-tl');
            var trHandle = modal.querySelector('.resize-corner-tr');
            var blHandle = modal.querySelector('.resize-corner-bl');
            var brHandle = modal.querySelector('.resize-corner-br');

            topHandle.addEventListener('mousedown', function(e) { startResize(e, 'top'); });
            rightHandle.addEventListener('mousedown', function(e) { startResize(e, 'right'); });
            bottomHandle.addEventListener('mousedown', function(e) { startResize(e, 'bottom'); });
            leftHandle.addEventListener('mousedown', function(e) { startResize(e, 'left'); });

            tlHandle.addEventListener('mousedown', function(e) { startResize(e, 'corner-tl'); });
            trHandle.addEventListener('mousedown', function(e) { startResize(e, 'corner-tr'); });
            blHandle.addEventListener('mousedown', function(e) { startResize(e, 'corner-bl'); });
            brHandle.addEventListener('mousedown', function(e) { startResize(e, 'corner-br'); });
        }

        function startResize(e, type) {
            isResizing = true;
            resizeType = type;

            var modal = document.getElementById('modal-container');
            var rect = modal.getBoundingClientRect();

            startX = e.clientX;
            startY = e.clientY;
            startWidth = rect.width;
            startHeight = rect.height;
            startLeft = rect.left;
            startTop = rect.top;

            document.addEventListener('mousemove', doResize);
            document.addEventListener('mouseup', stopResize);

            e.preventDefault();
            document.body.style.userSelect = 'none';
        }

        function doResize(e) {
            if (!isResizing) return;

            var modal = document.getElementById('modal-container');
            var modalContainer = document.getElementById('webview-modal');
            var deltaX = e.clientX - startX;
            var deltaY = e.clientY - startY;

            var newWidth = startWidth;
            var newHeight = startHeight;
            var newLeft = startLeft;
            var newTop = startTop;

            var minWidth = 320;
            var minHeight = 240;
            var maxWidth = window.innerWidth * 0.95;
            var maxHeight = window.innerHeight * 0.95;

            switch(resizeType) {
                case 'top':
                    newHeight = Math.max(minHeight, Math.min(startHeight - deltaY, maxHeight));
                    newTop = startTop + (startHeight - newHeight);
                    break;

                case 'right':
                    newWidth = Math.max(minWidth, Math.min(startWidth + deltaX, maxWidth));
                    break;

                case 'bottom':
                    newHeight = Math.max(minHeight, Math.min(startHeight + deltaY, maxHeight));
                    break;

                case 'left':
                    newWidth = Math.max(minWidth, Math.min(startWidth - deltaX, maxWidth));
                    newLeft = startLeft + (startWidth - newWidth);
                    break;

                case 'corner-tl':
                    newWidth = Math.max(minWidth, Math.min(startWidth - deltaX, maxWidth));
                    newHeight = Math.max(minHeight, Math.min(startHeight - deltaY, maxHeight));
                    newLeft = startLeft + (startWidth - newWidth);
                    newTop = startTop + (startHeight - newHeight);
                    break;

                case 'corner-tr':
                    newWidth = Math.max(minWidth, Math.min(startWidth + deltaX, maxWidth));
                    newHeight = Math.max(minHeight, Math.min(startHeight - deltaY, maxHeight));
                    newTop = startTop + (startHeight - newHeight);
                    break;

                case 'corner-bl':
                    newWidth = Math.max(minWidth, Math.min(startWidth - deltaX, maxWidth));
                    newHeight = Math.max(minHeight, Math.min(startHeight + deltaY, maxHeight));
                    newLeft = startLeft + (startWidth - newWidth);
                    break;

                case 'corner-br':
                    newWidth = Math.max(minWidth, Math.min(startWidth + deltaX, maxWidth));
                    newHeight = Math.max(minHeight, Math.min(startHeight + deltaY, maxHeight));
                    break;
            }

            modal.style.width = newWidth + 'px';
            modal.style.height = newHeight + 'px';
            modal.style.maxWidth = 'none';
            modal.style.maxHeight = 'none';

            if (resizeType.includes('top') || resizeType.includes('left')) {
                modal.style.position = 'absolute';
                modal.style.left = (newLeft - modalContainer.getBoundingClientRect().left) + 'px';
                modal.style.top = (newTop - modalContainer.getBoundingClientRect().top) + 'px';
            }
        }

        function stopResize() {
            isResizing = false;
            resizeType = '';

            document.removeEventListener('mousemove', doResize);
            document.removeEventListener('mouseup', stopResize);

            document.body.style.userSelect = '';
        }
    </script>
</body>
</html>